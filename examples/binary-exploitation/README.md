# Binary Exploitation Examples

This directory contains vulnerable programs for learning binary exploitation.

## ⚠️ WARNING

These programs are **intentionally vulnerable** for educational purposes only!
- Never use in production
- Only test on systems you own
- Understand the legal and ethical implications

## Examples

### 1. Stack Buffer Overflow (`stack_overflow.c`)
Classic stack-based buffer overflow vulnerability.

**Vulnerability:** No bounds checking on user input  
**Goal:** Overwrite return address to execute `win()` function

**Compilation:**
```bash
# Disable stack protections for learning
gcc -fno-stack-protector -z execstack -no-pie stack_overflow.c -o stack_overflow

# Check protections
checksec stack_overflow
```

**Exploitation:**
```bash
# Find offset
python3 -c "from pwn import *; print(cyclic(200))" | ./stack_overflow

# Create exploit
python3 exploit_stack.py
```

### 2. Format String (`format_string.c`)
Format string vulnerability for arbitrary read/write.

**Vulnerability:** User input passed directly to `printf()`  
**Goal:** Read from arbitrary memory locations

**Compilation:**
```bash
gcc -no-pie format_string.c -o format_string
```

**Testing:**
```bash
# Read stack
./format_string "AAAA %p %p %p %p"

# Read specific address
./format_string "$(python3 -c 'import sys; sys.stdout.buffer.write(b"\x00\x40\x00\x00\x00\x00\x00\x00")')%7\$s"
```

### 3. Use After Free (`use_after_free.c`)
Heap vulnerability demonstrating UAF.

**Vulnerability:** Object used after being freed  
**Goal:** Control freed memory to hijack execution

**Compilation:**
```bash
gcc use_after_free.c -o use_after_free
```

### 4. Return-Oriented Programming (`rop_example.c`)
Program for practicing ROP chains.

**Vulnerability:** Buffer overflow with NX enabled  
**Goal:** Build ROP chain to execute `/bin/sh`

**Compilation:**
```bash
gcc -fno-stack-protector -no-pie rop_example.c -o rop_example
```

## Tools Required

```bash
# pwntools (Python exploitation framework)
pip3 install pwntools

# GDB with plugins
git clone https://github.com/pwndbg/pwndbg
cd pwndbg && ./setup.sh

# ROPgadget
pip3 install ROPgadget

# Checksec
sudo apt install checksec
```

## Learning Path

1. **Start with `stack_overflow.c`**
   - Understand stack layout
   - Practice finding offsets
   - Overwrite return address

2. **Move to `format_string.c`**
   - Learn format string basics
   - Practice arbitrary reads
   - Attempt arbitrary writes

3. **Try `use_after_free.c`**
   - Understand heap layout
   - Practice heap feng shui
   - Control freed objects

4. **Advanced: `rop_example.c`**
   - Build ROP chains
   - Bypass NX protection
   - Chain gadgets together

## Debugging Tips

```bash
# Run with GDB
gdb ./stack_overflow

# Set breakpoints
(gdb) break vulnerable
(gdb) run

# Examine memory
(gdb) x/20x $rsp
(gdb) x/i $rip

# With pwndbg
pwndbg> cyclic 200
pwndbg> cyclic -l 0x61616162
pwndbg> vmmap
pwndbg> telescope $rsp 20
```

## Protection Mechanisms

Learn about and practice bypassing:

- **Stack Canaries**: Detect stack overflow
- **ASLR**: Randomize memory addresses
- **NX/DEP**: Prevent code execution on stack
- **PIE**: Randomize code location
- **RELRO**: Make GOT read-only

## Practice Platforms

After mastering these examples, try:
- [pwnable.kr](http://pwnable.kr/)
- [ROP Emporium](https://ropemporium.com/)
- [Exploit Education](https://exploit.education/)
- [picoCTF](https://picoctf.org/)

## Resources

- [Nightmare (Binary Exploitation Course)](https://guyinatuxedo.github.io/)
- [pwn.college](https://pwn.college/)
- [LiveOverflow YouTube](https://www.youtube.com/c/LiveOverflow)

## Ethical Guidelines

✅ **Do:**
- Learn in controlled environments
- Practice on your own systems
- Report real vulnerabilities responsibly

❌ **Don't:**
- Attack systems without permission
- Use knowledge maliciously
- Share exploits for active vulnerabilities

---

**Remember**: These skills should be used to improve security, not compromise it!
